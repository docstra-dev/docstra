---
language: documenttype.markdown
source_file: /Users/jorgenosberg/development/docstra/docs/core/documentation/setup.md
summary: 'Setup.py

  ================'
title: setup

---

Setup.py
================

Overview
--------

This script is used to set up a basic MkDocs environment for the Docstra project. It checks for required dependencies, installs them if necessary, and sets up a basic configuration file.

Implementation Details
--------------------

The script uses the following steps to achieve its purpose:

1.  Checks for required dependencies using the `check_dependencies` function.
2.  Installs missing dependencies using the `install_dependencies` function.
3.  Sets up a basic MkDocs environment in the specified output directory using the `setup_mkdocs_environment` function.

Usage Examples
-------------

To use this script, you can run it from the command line with the following options:

*   `-o` or `--output`: Specifies the output directory for the documentation.
*   `--check-only`: Only checks for dependencies without installing them.
*   `--init`: Initializes a basic MkDocs environment.

Example usage:
```bash
python setup.py -o ./docs --init
```

Functions
---------

### check_dependencies()

Checks if required dependencies are installed. Returns a list of missing dependencies.

#### Parameters

None

#### Return Value

A list of missing dependencies.

#### Purpose

This function checks for the presence of required dependencies and returns a list of missing dependencies.

```python
def check_dependencies():
    """Check if required dependencies are installed."""
    dependencies = ["mkdocs", "mkdocs-material", "pymdown-extensions", "mkdocstrings"]

    missing = []

    for dep in dependencies:
        try:
            # Try to import the package
            if dep == "mkdocs":
                subprocess.run(["mkdocs", "--version"], check=True, capture_output=True)
            elif dep == "mkdocs-material":
                import importlib

                importlib.import_module("material")
            elif dep == "pymdown-extensions":
                import importlib

                importlib.import_module("pymdownx")
            elif dep == "mkdocstrings":
                import importlib

                importlib.import_module("mkdocstrings")
        except (ImportError, subprocess.CalledProcessError, ModuleNotFoundError):
            missing.append(dep)

    return missing
```

### install_dependencies(missing_deps)

Installs missing dependencies.

#### Parameters

*   `missing_deps`: A list of missing dependencies.

#### Return Value

`True` if installation is successful, `False` otherwise.

#### Purpose

This function installs missing dependencies using pip.

```python
def install_dependencies(missing_deps):
    """Install missing dependencies."""
    if not missing_deps:
        return True

    print(f"Installing missing dependencies: {', '.join(missing_deps)}")

    try:
        # Install missing dependencies using pip
        subprocess.run(
            [sys.executable, "-m", "pip", "install"] + missing_deps, check=True
        )
        return True
    except subprocess.CalledProcessError as e:
        print(f"Error installing dependencies: {e}")
        return False
```

### setup_mkdocs_environment(output_dir)

Sets up a basic MkDocs environment in the specified output directory.

#### Parameters

*   `output_dir`: The output directory for the documentation.

#### Return Value

`True` if initialization is successful, `False` otherwise.

#### Purpose

This function sets up a basic MkDocs environment by creating necessary directories and files.

```python
def setup_mkdocs_environment(output_dir):
    """Set up a basic MkDocs environment in the output directory."""
    output_path = Path(output_dir)

    # Create necessary directories
    docs_dir = output_path
    os.makedirs(docs_dir, exist_ok=True)

    # Create a basic index.md file if it doesn't exist
    index_path = docs_dir / "index.md"
    if not index_path.exists():
        with open(index_path, "w") as f:
            f.write(
                """# Documentation

This documentation site is generated by Docstra.

## Getting Started

Navigate through the documentation using the menu on the left.
"""
            )

    # Create a basic mkdocs.yml file if it doesn't exist
    config_path = output_path / "mkdocs.yml"
    if not config_path.exists():
        with open(config_path, "w") as f:
            f.write(
                """site_name: Project Documentation
theme:
  name: material
  palette:
    primary: indigo
    accent: indigo
  features:
    - navigation.instant
    - navigation.tracking
    - navigation.expand
    - navigation.indexes
    - search.highlight
    - search.share
    - toc.follow
    - content.code.copy
markdown_extensions:
  - pymdownx.highlight
  - pymdownx.superfences
  - pymdownx.inlinehilite
  - pymdownx.tabbed
  - pymdownx.critic
  - pymdownx.tasklist
  - admonition
  - toc
  - tables
plugins:
  - search
  - mkdocstrings
nav:
  - Home: index.md
"""
            )

    return True
```

Main Function
-------------

The main function is the entry point for the script.

#### Parameters

*   `args`: An object containing command-line arguments.

#### Return Value

`0` if setup is successful, non-zero otherwise.

#### Purpose

This function parses command-line arguments and sets up a basic MkDocs environment.

```python
def main():
    """Main entry point for the documentation setup script."""
    parser = argparse.ArgumentParser(
        description="Set up documentation environment for Docstra"
    )
    parser.add_argument(
        "--output", "-o", default="./docs", help="Output directory for documentation"
    )
    parser.add_argument(
        "--check-only",
        action="store_true",
        help="Only check dependencies without installing",
    )
    parser.add_argument(
        "--init", action="store_true", help="Initialize a basic MkDocs environment"
    )

    args = parser.parse_args()

    # Check dependencies
    missing_deps = check_dependencies()

    if missing_deps:
        print(f"Missing dependencies: {', '.join(missing_deps)}")

        if args.check_only:
            print("\nTo install, run:")
            print(f"  pip install {' '.join(missing_deps)}")
            return 1

        # Install dependencies
        if not install_dependencies(missing_deps):
            print("Failed to install dependencies. Please install them manually.")
            return 1
    else:
        print("All dependencies are already installed.")

    # Set up MkDocs environment if requested
    if args.init:
        if setup_mkdocs_environment(args.output):
            print(f"MkDocs environment initialized in {args.output}")
        else:
            print(f"Failed to initialize MkDocs environment in {args.output}")
            return 1

    print("\nSetup complete!")
    print(f"To serve documentation: cd {args.output} && mkdocs serve")

    return 0


if __name__ == "__main__":
    sys.exit(main())
```

Notes
----

*   This script assumes that the required dependencies are installed and can be installed using pip.
*   The `setup_mkdocs_environment` function creates a basic MkDocs environment by creating necessary directories and files. It also sets up the configuration file (`mkdocs.yml`) with default settings.
*   The main function parses command-line arguments and calls the `check_dependencies`, `install_dependencies`, and `setup_mkdocs_environment` functions as needed.

Usage
-----

To use this script, save it to a file named `setup.py` in your project directory. Then, run it from the command line with the desired options:

```bash
python setup.py -o ./docs --init
```

This will set up a basic MkDocs environment in the `./docs` directory and initialize the configuration file (`mkdocs.yml`).


## Source Code

```documenttype.markdown
---
language: documenttype.python
source_file: /Users/jorgenosberg/development/docstra/docstra/core/documentation/setup.py
summary: 'Setup.py

  ================'
title: setup

---

# Setup.py
================

## Overview

This script is used to set up a basic MkDocs environment for the Docstra project. It checks for required dependencies, installs them if necessary, and sets up a basic configuration file.

## Implementation Details

The script uses the following steps to achieve its purpose:

1.  Checks for required dependencies using the `check_dependencies` function.
2.  Installs missing dependencies using the `install_dependencies` function.
3.  Sets up a basic MkDocs environment in the specified output directory using the `setup_mkdocs_environment` function.

## Usage Examples

To use this script, you can run it from the command line with the following options:

*   `-o` or `--output`: Specifies the output directory for the documentation.
*   `--check-only`: Only checks for dependencies without installing them.
*   `--init`: Initializes a basic MkDocs environment.

Example usage:
```bash
python setup.py -o ./docs --init
```

## Functions

### check_dependencies()

Checks if required dependencies are installed. Returns a list of missing dependencies.

#### Parameters

None

#### Return Value

A list of missing dependencies.

#### Purpose

This function checks for the presence of required dependencies and returns a list of missing dependencies.

```python
def check_dependencies():
    """Check if required dependencies are installed."""
    dependencies = ["mkdocs", "mkdocs-material", "pymdown-extensions", "mkdocstrings"]

    missing = []

    for dep in dependencies:
        try:
            # Try to import the package
            if dep == "mkdocs":
                subprocess.run(["mkdocs", "--version"], check=True, capture_output=True)
            elif dep == "mkdocs-material":
                import importlib

                importlib.import_module("material")
            elif dep == "pymdown-extensions":
                import importlib

                importlib.import_module("pymdownx")
            elif dep == "mkdocstrings":
                import importlib

                importlib.import_module("mkdocstrings")
        except (ImportError, subprocess.CalledProcessError, ModuleNotFoundError):
            missing.append(dep)

    return missing
```

### install_dependencies(missing_deps)

Installs missing dependencies.

#### Parameters

*   `missing_deps`: A list of missing dependencies.

#### Return Value

`True` if installation is successful, `False` otherwise.

#### Purpose

This function installs missing dependencies using pip.

```python
def install_dependencies(missing_deps):
    """Install missing dependencies."""
    if not missing_deps:
        return True

    print(f"Installing missing dependencies: {', '.join(missing_deps)}")

    try:
        # Install missing dependencies using pip
        subprocess.run(
            [sys.executable, "-m", "pip", "install"] + missing_deps, check=True
        )
        return True
    except subprocess.CalledProcessError as e:
        print(f"Error installing dependencies: {e}")
        return False
```

### setup_mkdocs_environment(output_dir)

Sets up a basic MkDocs environment in the specified output directory.

#### Parameters

*   `output_dir`: The output directory for the documentation.

#### Return Value

`True` if initialization is successful, `False` otherwise.

#### Purpose

This function sets up a basic MkDocs environment by creating necessary directories and files.

```python
def setup_mkdocs_environment(output_dir):
    """Set up a basic MkDocs environment in the output directory."""
    output_path = Path(output_dir)

    # Create necessary directories
    docs_dir = output_path
    os.makedirs(docs_dir, exist_ok=True)

    # Create a basic index.md file if it doesn't exist
    index_path = docs_dir / "index.md"
    if not index_path.exists():
        with open(index_path, "w") as f:
            f.write(
                """# Documentation

This documentation site is generated by Docstra.

## Getting Started

Navigate through the documentation using the menu on the left.
"""
            )

    # Create a basic mkdocs.yml file if it doesn't exist
    config_path = output_path / "mkdocs.yml"
    if not config_path.exists():
        with open(config_path, "w") as f:
            f.write(
                """site_name: Project Documentation
theme:
  name: material
  palette:
    primary: indigo
    accent: indigo
  features:
    - navigation.instant
    - navigation.tracking
    - navigation.expand
    - navigation.indexes
    - search.highlight
    - search.share
    - toc.follow
    - content.code.copy
markdown_extensions:
  - pymdownx.highlight
  - pymdownx.superfences
  - pymdownx.inlinehilite
  - pymdownx.tabbed
  - pymdownx.critic
  - pymdownx.tasklist
  - admonition
  - toc
  - tables
plugins:
  - search
  - mkdocstrings
nav:
  - Home: index.md
"""
            )

    return True
```

## Main Function

The main function is the entry point for the script.

#### Parameters

*   `args`: An object containing command-line arguments.

#### Return Value

`0` if setup is successful, non-zero otherwise.

#### Purpose

This function parses command-line arguments and sets up a basic MkDocs environment.

```python
def main():
    """Main entry point for the documentation setup script."""
    parser = argparse.ArgumentParser(
        description="Set up documentation environment for Docstra"
    )
    parser.add_argument(
        "--output", "-o", default="./docs", help="Output directory for documentation"
    )
    parser.add_argument(
        "--check-only",
        action="store_true",
        help="Only check dependencies without installing",
    )
    parser.add_argument(
        "--init", action="store_true", help="Initialize a basic MkDocs environment"
    )

    args = parser.parse_args()

    # Check dependencies
    missing_deps = check_dependencies()

    if missing_deps:
        print(f"Missing dependencies: {', '.join(missing_deps)}")

        if args.check_only:
            print("\nTo install, run:")
            print(f"  pip install {' '.join(missing_deps)}")
            return 1

        # Install dependencies
        if not install_dependencies(missing_deps):
            print("Failed to install dependencies. Please install them manually.")
            return 1
    else:
        print("All dependencies are already installed.")

    # Set up MkDocs environment if requested
    if args.init:
        if setup_mkdocs_environment(args.output):
            print(f"MkDocs environment initialized in {args.output}")
        else:
            print(f"Failed to initialize MkDocs environment in {args.output}")
            return 1

    print("\nSetup complete!")
    print(f"To serve documentation: cd {args.output} && mkdocs serve")

    return 0
```

## Notes

*   This script assumes that the required dependencies are installed on the system.
*   The `--check-only` option allows you to check for missing dependencies without installing them.
*   The `--init` option initializes a basic MkDocs environment in the specified output directory.


## Source Code

```documenttype.python
# File: ./docstra/core/documentation/setup.py

import os
import sys
import subprocess
from pathlib import Path
import argparse


def check_dependencies():
    """Check if required dependencies are installed."""
    dependencies = ["mkdocs", "mkdocs-material", "pymdown-extensions", "mkdocstrings"]

    missing = []

    for dep in dependencies:
        try:
            # Try to import the package
            if dep == "mkdocs":
                subprocess.run(["mkdocs", "--version"], check=True, capture_output=True)
            elif dep == "mkdocs-material":
                import importlib

                importlib.import_module("material")
            elif dep == "pymdown-extensions":
                import importlib

                importlib.import_module("pymdownx")
            elif dep == "mkdocstrings":
                import importlib

                importlib.import_module("mkdocstrings")
        except (ImportError, subprocess.CalledProcessError, ModuleNotFoundError):
            missing.append(dep)

    return missing


def install_dependencies(missing_deps):
    """Install missing dependencies."""
    if not missing_deps:
        return True

    print(f"Installing missing dependencies: {', '.join(missing_deps)}")

    try:
        # Install missing dependencies using pip
        subprocess.run(
            [sys.executable, "-m", "pip", "install"] + missing_deps, check=True
        )
        return True
    except subprocess.CalledProcessError as e:
        print(f"Error installing dependencies: {e}")
        return False


def setup_mkdocs_environment(output_dir):
    """Set up a basic MkDocs environment in the output directory."""
    output_path = Path(output_dir)

    # Create necessary directories
    docs_dir = output_path
    os.makedirs(docs_dir, exist_ok=True)

    # Create a basic index.md file if it doesn't exist
    index_path = docs_dir / "index.md"
    if not index_path.exists():
        with open(index_path, "w") as f:
            f.write(
                """# Documentation

This documentation site is generated by Docstra.

## Getting Started

Navigate through the documentation using the menu on the left.
"""
            )

    # Create a basic mkdocs.yml file if it doesn't exist
    config_path = output_path / "mkdocs.yml"
    if not config_path.exists():
        with open(config_path, "w") as f:
            f.write(
                """site_name: Project Documentation
theme:
  name: material
  palette:
    primary: indigo
    accent: indigo
  features:
    - navigation.instant
    - navigation.tracking
    - navigation.expand
    - navigation.indexes
    - search.highlight
    - search.share
    - toc.follow
    - content.code.copy
markdown_extensions:
  - pymdownx.highlight
  - pymdownx.superfences
  - pymdownx.inlinehilite
  - pymdownx.tabbed
  - pymdownx.critic
  - pymdownx.tasklist
  - admonition
  - toc
  - tables
plugins:
  - search
  - mkdocstrings
nav:
  - Home: index.md
"""
            )

    return True


def main():
    """Main entry point for the documentation setup script."""
    parser = argparse.ArgumentParser(
        description="Set up documentation environment for Docstra"
    )
    parser.add_argument(
        "--output", "-o", default="./docs", help="Output directory for documentation"
    )
    parser.add_argument(
        "--check-only",
        action="store_true",
        help="Only check dependencies without installing",
    )
    parser.add_argument(
        "--init", action="store_true", help="Initialize a basic MkDocs environment"
    )

    args = parser.parse_args()

    # Check dependencies
    missing_deps = check_dependencies()

    if missing_deps:
        print(f"Missing dependencies: {', '.join(missing_deps)}")

        if args.check_only:
            print("\nTo install, run:")
            print(f"  pip install {' '.join(missing_deps)}")
            return 1

        # Install dependencies
        if not install_dependencies(missing_deps):
            print("Failed to install dependencies. Please install them manually.")
            return 1
    else:
        print("All dependencies are already installed.")

    # Set up MkDocs environment if requested
    if args.init:
        if setup_mkdocs_environment(args.output):
            print(f"MkDocs environment initialized in {args.output}")
        else:
            print(f"Failed to initialize MkDocs environment in {args.output}")
            return 1

    print("\nSetup complete!")
    print(f"To serve documentation: cd {args.output} && mkdocs serve")

    return 0


if __name__ == "__main__":
    sys.exit(main())

```

```
